{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///home/rust-cohle/mitigate-human-trafficking/client/components/SafetyForm.js"],"sourcesContent":["\"use client\";\n\nimport React from 'react';\n\nconst SafetyForm = ({ formData, setFormData }) => {\n    const handleChange = (e) => {\n        setFormData({ ...formData, [e.target.name]: e.target.value });\n    };\n\n    return (\n        <div style={{ marginBottom: '20px' }}>\n            <div style={{ marginRight: '20px' }}>\n                <label htmlFor=\"name\">Full Name</label>\n                <input\n                    type=\"text\"\n                    id=\"name\"\n                    name=\"name\"\n                    placeholder=\"Name\"\n                    value={formData.name}\n                    onChange={handleChange}\n                />\n            </div>\n            <div style={{ marginRight: '20px' }}>\n                <label htmlFor=\"phone\">Details</label>\n                <input\n                    type=\"tel\"\n                    id=\"phone\"\n                    name=\"phone\"\n                    placeholder=\"1234 5678 9234 1234\"\n                    value={formData.phone}\n                    onChange={handleChange}\n                />\n            </div>\n        </div>\n    );\n};\n\nexport default SafetyForm;\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIA,MAAM,aAAa,CAAC,EAAE,QAAQ,EAAE,WAAW,EAAE;IACzC,MAAM,eAAe,CAAC;QAClB,YAAY;YAAE,GAAG,QAAQ;YAAE,CAAC,EAAE,MAAM,CAAC,IAAI,CAAC,EAAE,EAAE,MAAM,CAAC,KAAK;QAAC;IAC/D;IAEA,qBACI,8OAAC;QAAI,OAAO;YAAE,cAAc;QAAO;;0BAC/B,8OAAC;gBAAI,OAAO;oBAAE,aAAa;gBAAO;;kCAC9B,8OAAC;wBAAM,SAAQ;kCAAO;;;;;;kCACtB,8OAAC;wBACG,MAAK;wBACL,IAAG;wBACH,MAAK;wBACL,aAAY;wBACZ,OAAO,SAAS,IAAI;wBACpB,UAAU;;;;;;;;;;;;0BAGlB,8OAAC;gBAAI,OAAO;oBAAE,aAAa;gBAAO;;kCAC9B,8OAAC;wBAAM,SAAQ;kCAAQ;;;;;;kCACvB,8OAAC;wBACG,MAAK;wBACL,IAAG;wBACH,MAAK;wBACL,aAAY;wBACZ,OAAO,SAAS,KAAK;wBACrB,UAAU;;;;;;;;;;;;;;;;;;AAK9B;uCAEe"}},
    {"offset": {"line": 105, "column": 0}, "map": {"version":3,"sources":["file:///home/rust-cohle/mitigate-human-trafficking/client/components/SOSButton.js"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useRef } from 'react';\n\nconst SOSButton = ({ formData }) => {\n    const [status, setStatus] = useState('');\n    const [loading, setLoading] = useState(false);\n\n    const captureImage = async () => {\n        try {\n            const stream = await navigator.mediaDevices.getUserMedia({ video: true });\n            const video = document.createElement('video');\n            video.srcObject = stream;\n            await video.play();\n\n            const canvas = document.createElement('canvas');\n            canvas.width = 640;\n            canvas.height = 480;\n            const ctx = canvas.getContext('2d');\n            ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n\n            const imageBase64 = canvas.toDataURL('image/jpeg');\n\n            // Stop tracks\n            stream.getTracks().forEach(track => track.stop());\n\n            return imageBase64;\n        } catch (err) {\n            console.error(\"Camera error:\", err);\n            throw new Error(\"Camera permission denied or unavailable\");\n        }\n    };\n\n    const getLocation = () => {\n        return new Promise((resolve, reject) => {\n            if (!navigator.geolocation) {\n                reject(new Error(\"Geolocation not supported\"));\n            }\n            navigator.geolocation.getCurrentPosition(\n                (position) => {\n                    resolve({\n                        latitude: position.coords.latitude,\n                        longitude: position.coords.longitude\n                    });\n                },\n                (error) => {\n                    reject(error);\n                }\n            );\n        });\n    };\n\n    const handleSOS = async () => {\n        if (!formData.name || !formData.phone) {\n            setStatus('Please fill in your details first.');\n            return;\n        }\n\n        setLoading(true);\n        setStatus('Activating SOS...');\n\n        try {\n            // Parallel execution for speed\n            const [location, image] = await Promise.all([\n                getLocation(),\n                captureImage()\n            ]);\n\n            const payload = {\n                name: formData.name,\n                phone: formData.phone,\n                latitude: location.latitude,\n                longitude: location.longitude,\n                image: image\n            };\n\n            // Determine backend URL (assume same host, port 3001)\n            const protocol = window.location.protocol;\n            const hostname = window.location.hostname;\n            const backendUrl = `${protocol}//${hostname}:3001/api/sos`;\n\n            // Send to Backend\n            const response = await fetch(backendUrl, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify(payload),\n            });\n\n            if (response.ok) {\n                setStatus('SOS Alert Sent Successfully! Help is on the way.');\n            } else {\n                setStatus('Failed to send alert.');\n            }\n\n        } catch (error) {\n            console.error(error);\n            setStatus(`Error: ${error.message}`);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <div>\n            <button className=\"sos-btn\" onClick={handleSOS} disabled={loading}>\n                {loading ? '...' : 'SOS'}\n            </button>\n            {status && (\n                <p className={`status-msg ${status.includes('Success') ? 'status-success' : 'status-error'}`}>\n                    {status}\n                </p>\n            )}\n        </div>\n    );\n};\n\nexport default SOSButton;\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIA,MAAM,YAAY,CAAC,EAAE,QAAQ,EAAE;IAC3B,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,MAAM,eAAe;QACjB,IAAI;YACA,MAAM,SAAS,MAAM,UAAU,YAAY,CAAC,YAAY,CAAC;gBAAE,OAAO;YAAK;YACvE,MAAM,QAAQ,SAAS,aAAa,CAAC;YACrC,MAAM,SAAS,GAAG;YAClB,MAAM,MAAM,IAAI;YAEhB,MAAM,SAAS,SAAS,aAAa,CAAC;YACtC,OAAO,KAAK,GAAG;YACf,OAAO,MAAM,GAAG;YAChB,MAAM,MAAM,OAAO,UAAU,CAAC;YAC9B,IAAI,SAAS,CAAC,OAAO,GAAG,GAAG,OAAO,KAAK,EAAE,OAAO,MAAM;YAEtD,MAAM,cAAc,OAAO,SAAS,CAAC;YAErC,cAAc;YACd,OAAO,SAAS,GAAG,OAAO,CAAC,CAAA,QAAS,MAAM,IAAI;YAE9C,OAAO;QACX,EAAE,OAAO,KAAK;YACV,QAAQ,KAAK,CAAC,iBAAiB;YAC/B,MAAM,IAAI,MAAM;QACpB;IACJ;IAEA,MAAM,cAAc;QAChB,OAAO,IAAI,QAAQ,CAAC,SAAS;YACzB,IAAI,CAAC,UAAU,WAAW,EAAE;gBACxB,OAAO,IAAI,MAAM;YACrB;YACA,UAAU,WAAW,CAAC,kBAAkB,CACpC,CAAC;gBACG,QAAQ;oBACJ,UAAU,SAAS,MAAM,CAAC,QAAQ;oBAClC,WAAW,SAAS,MAAM,CAAC,SAAS;gBACxC;YACJ,GACA,CAAC;gBACG,OAAO;YACX;QAER;IACJ;IAEA,MAAM,YAAY;QACd,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,KAAK,EAAE;YACnC,UAAU;YACV;QACJ;QAEA,WAAW;QACX,UAAU;QAEV,IAAI;YACA,+BAA+B;YAC/B,MAAM,CAAC,UAAU,MAAM,GAAG,MAAM,QAAQ,GAAG,CAAC;gBACxC;gBACA;aACH;YAED,MAAM,UAAU;gBACZ,MAAM,SAAS,IAAI;gBACnB,OAAO,SAAS,KAAK;gBACrB,UAAU,SAAS,QAAQ;gBAC3B,WAAW,SAAS,SAAS;gBAC7B,OAAO;YACX;YAEA,sDAAsD;YACtD,MAAM,WAAW,OAAO,QAAQ,CAAC,QAAQ;YACzC,MAAM,WAAW,OAAO,QAAQ,CAAC,QAAQ;YACzC,MAAM,aAAa,GAAG,SAAS,EAAE,EAAE,SAAS,aAAa,CAAC;YAE1D,kBAAkB;YAClB,MAAM,WAAW,MAAM,MAAM,YAAY;gBACrC,QAAQ;gBACR,SAAS;oBACL,gBAAgB;gBACpB;gBACA,MAAM,KAAK,SAAS,CAAC;YACzB;YAEA,IAAI,SAAS,EAAE,EAAE;gBACb,UAAU;YACd,OAAO;gBACH,UAAU;YACd;QAEJ,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC;YACd,UAAU,CAAC,OAAO,EAAE,MAAM,OAAO,EAAE;QACvC,SAAU;YACN,WAAW;QACf;IACJ;IAEA,qBACI,8OAAC;;0BACG,8OAAC;gBAAO,WAAU;gBAAU,SAAS;gBAAW,UAAU;0BACrD,UAAU,QAAQ;;;;;;YAEtB,wBACG,8OAAC;gBAAE,WAAW,CAAC,WAAW,EAAE,OAAO,QAAQ,CAAC,aAAa,mBAAmB,gBAAgB;0BACvF;;;;;;;;;;;;AAKrB;uCAEe"}},
    {"offset": {"line": 230, "column": 0}, "map": {"version":3,"sources":["file:///home/rust-cohle/mitigate-human-trafficking/client/app/page.js"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from 'react';\nimport SafetyForm from '../components/SafetyForm';\nimport SOSButton from '../components/SOSButton';\n\nexport default function Home() {\n    const [formData, setFormData] = useState({\n        name: '',\n        phone: ''\n    });\n\n    return (\n        <main className=\"container\">\n            <h1>Safety Portal</h1>\n            <p style={{ textAlign: 'center', marginBottom: '20px', color: '#ced6e0' }}>\n                Fill in your details and press SOS in case of emergency.\n            </p>\n            <SafetyForm formData={formData} setFormData={setFormData} />\n            <SOSButton formData={formData} />\n        </main>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS;IACpB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;QACrC,MAAM;QACN,OAAO;IACX;IAEA,qBACI,8OAAC;QAAK,WAAU;;0BACZ,8OAAC;0BAAG;;;;;;0BACJ,8OAAC;gBAAE,OAAO;oBAAE,WAAW;oBAAU,cAAc;oBAAQ,OAAO;gBAAU;0BAAG;;;;;;0BAG3E,8OAAC,mIAAU;gBAAC,UAAU;gBAAU,aAAa;;;;;;0BAC7C,8OAAC,kIAAS;gBAAC,UAAU;;;;;;;;;;;;AAGjC"}},
    {"offset": {"line": 296, "column": 0}, "map": {"version":3,"sources":["file:///home/rust-cohle/mitigate-human-trafficking/client/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0]}},
    {"offset": {"line": 315, "column": 0}, "map": {"version":3,"sources":["file:///home/rust-cohle/mitigate-human-trafficking/client/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0]}},
    {"offset": {"line": 320, "column": 0}, "map": {"version":3,"sources":["file:///home/rust-cohle/mitigate-human-trafficking/client/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0]}}]
}